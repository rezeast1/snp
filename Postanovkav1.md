# Задача:
**В мобильное приложение требуется добавить 
возможность, чтобы каждый пользователь мог указать 
свои паспортные данные, которые должны проверяться по ИНН, корректные данные должны отправляться в базу данных о пользователе. Также у пользователя должна быть возмоижность удалять паспортные данные через службу поддержки.**
##
## Frontend tasks:
1. Отправить запрос `GET v1/currentuser` , чтобы получить данные о пользователе.
2. Если в ответе ,  поле `is_banned` = 1(_ban_) или 2(_deleted_), то нужно заблокировать ему интерфейс 
    и вывести соответсвующую ошибку.<br>
    Иначе, отобразить личный кабинет.
3. Далее отобразить пользователю кнопку "Добавить паспортные данные", если поле `status` = 0(_неподтвержден_)
4. При нажатии кнопки "Добавить паспортные данные", должна происходить переадресация на форму заполнения данных.
   
5. Создать форму для ввода паспортных данных.

| Name|Type| Required fields           | Validation                                                                                            |Description    | 
|-----|----|---------------------------|-------------------------------------------------------------------------------------------------------|-------------------------------------|
|fname|string| Обязательное поле         | Допускается вводить только символы кириллицы,одиночные пробелы,дефисы,точки,запятые и круглые скобки. |Имя                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 
|lname|string| Обязательное поле         | Допускается вводить только символы кириллицы,одиночные пробелы,дефисы,точки,запятые и круглые скобки. |Фамилия                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 
|mname|string| Обязательное поле         | Допускается вводить только символы кириллицы,одиночные пробелы,дефисы,точки,запятые и круглые скобки. |Отчество                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 
|typeDoc|integer| Условно-обязательное поле |                                                                                                       |Вид документа, удостоверяющего личность:<br>  01 - Паспорт гражданина СССР<br>03 - Свидетельство о рождении<br>10 - Паспорт иностранного гражданина<br>12 - Вид на жительство в Российской Федерации<br>15 - Разрешение на временное проживание в Российской Федерации<br>19 - Свидетельство о предоставлении временного убежища на территории Российской Федерации<br>21 - Паспорт гражданина Российской Федерации<br>23 - Свидетельство о рождении, выданное уполномоченным органом иностранного государства 
|dateOfBirth|date| Обязательное поле         |                                                                                                       |Дата рождения                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
|sernumDoc|string| Обязательное поле         | Допускается вводить только от 9 до 10 символов                                                        |Серия и номер документа                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 
|dateOfIssue|date| Необязательое поле        |                                                                                                       |Дата выдачи документа                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          

Создать кнопку "Отправить данные", при ее нажати использовать хендлер `POST/user/{id}`

6. В случае верного ввода данных - кнопка _"Отправить данные"_ становиться активной.

7. Создать веб-страницу для системного администратора

|Name|Type|Validation|Description|
|----|----|----|----|
|SerialNumber|int|Допускается вводить только от 9 до 10 символов|Серия и номер паспорта|

8. Добавить кнопку "_Удалить_", которая взаимодействует с хендлером `DELETE/PassP `

## Backend tasks
1. После запроса получения `GET v1/currentuser` , передать данные о пользователе
2. После запроса получения `POST/user/{id}` , проверить сессию пользователя и провести валидацию введенных им данных.
3. При соответвии - запрос данных с сервера ФНС
4. Изменить в таблице(`user`),  поле `status` = 2(_На обработке_).
5. После получения ответа от сервера ФНС , проверить полученные данные, а именно массив items,если он пуст изменить в таблице(`user`),  поле `status` = 0(_Неподтвержден_).<br>
    Иначе, изменить в таблице(user),  поле `status` = 1(_Подтвержден_) и отправить эти данные в таблицу(`userData`).
6. Для хендера `DELETE/PassP ` , добавить специальное условие, что может использовать только юзер ,в БД(_user_) ,поле `is_role` = 2(_admin_) , и поле is_banned != 1(_ban_) или 2(_deleted_).
##
#### Визуализация БД



![](https://sun9-54.userapi.com/impg/co1IjWvgWVlaX8j3oXP7zlX9rfhvS9SCgoY_uw/RiN_Hn9he2g.jpg?size=471x242&quality=96&sign=d145095b35aaa5a1e1321beb330097f3&type=album)


##
